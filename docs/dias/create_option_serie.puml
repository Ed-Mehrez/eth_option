@startuml
actor "Option Line Creator" as creator
actor "Writer" as writer
actor "Auction Winner" as auction_winner
participant "Request Handler" as req_handler
participant "Escrow Owner" as created_owner
participant "ERC721" as erc721
participant "Auction Contract" as auction
participant "Option Serie Contract" as opt_serie

creator -> req_handler: create request
req_handler -> req_handler: verification of request
req_handler -> erc721: mint
erc721 -> req_handler: to 
req_handler -> created_owner: create escrow account, from where only ERC721 owner can withdraw 

req_handler -> auction: create auction
req_handler -> auction: transfer erc721 for auction

req_handler -> opt_serie: create option serie with the reference to escrow owner

writer -> opt_serie: write options
opt_serie -> created_owner: fee goes to escrow account

auction -> auction: defines a winner
auction_winner -> erc721: take ownership of erc721 token
auction_winner -> created_owner: can withdraw collected fees


writer -> opt_serie: write options
opt_serie -> created_owner: fee goes to escrow account
auction_winner -> created_owner: can withdraw collected fees



@enduml
